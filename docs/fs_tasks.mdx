---
id: fs_tasks
title: Tasks
sidebar_label: Tasks
---

Tasks work with [**Drivers**](fs_drivers.mdx) to directly actuate valves, read sensor data, and send data via telemetry to the Ground Station.

## [Task.hpp](https://github.com/ProjectCaelus/cpp-flight-software/blob/e48a34618497decfc76fcca128f6dc082e0124db/include/flight/modules/tasks/Task.hpp)

This abstract (or virtual) class is the parent class of all other Task classes. 

| ```Task()```| 
| :----------- | 
| Default parent constructor. |

| Returns     | Description | 
| :---------- | :----------- | 
| ```virtual void```  | ```initalize()``` <br />  To be implemented by any subclass.  | 
| ```vitual void```  | ```read()```  <br />  A method that reads data from the associated Driver and updates the Registry. To be implemented by any subclass. | 
| ```vitual void```  | ```actuate()``` <br />  A method that, depending on the Flags, performs necessary actuations. To be implemented by any subclass.  | 


## [SensorTask.hpp](https://github.com/ProjectCaelus/cpp-flight-software/blob/e48a34618497decfc76fcca128f6dc082e0124db/include/flight/modules/tasks/SensorTask.hpp) and [SensorTask.cpp](https://github.com/ProjectCaelus/cpp-flight-software/blob/master/src/modules/tasks/SensorTask.cpp)

â€ŒSensorTask configures a ```PseudoSensor```, a simulated sensor that mimics generating data to help us test our code. Sensor Task reads from all the sensors and 
stores the data in the Registry.

_We're currently working on writing code to command read data from real sensors!_


| ```SensorTask()```| 
| :----------- | 
| Defaults to constructor of the Task superclass. |

| Returns     | Description | 
| :---------- | :----------- | 
| ```void```  | ```initalize()``` <br />  Generates a list of sensors and a pseudo-sensor Arduino, then logs an initalization message.   | 
| ```void```  | ```read()```  <br />  Calls the ```read()``` method of the pseudo-sensor Arduino, and updates the Registry. | 
| ```void```  | ```actuate()``` <br />   Empty method.  | 



## [ValveTask.hpp](https://github.com/ProjectCaelus/cpp-flight-software/blob/e48a34618497decfc76fcca128f6dc082e0124db/include/flight/modules/tasks/ValveTask.hpp) and [ValveTask.cpp](https://github.com/ProjectCaelus/cpp-flight-software/blob/master/src/modules/tasks/ValveTask.cpp)

Valve Task configures a ```PseudoValve```, a simulated valve that emulates a real solenoid valve. Valve Task monitors the actuation commands
to the valves, and if appropriate, directs the valves to actuate. 

_We're currently working on writing code to command real valves!_

| ```ValveTask()```| 
| :----------- | 
| Defaults to the constructor of the Task superclass. |

| Returns     | Description | 
| :---------- | :----------- | 
| ```void```  | ```begin()``` <br />  Calls the ```send_valve_info()``` method. | 
| ```void```  | ```send_valve_info()``` <br />  Converts valve commands to byte information, then sends the command to the Arduino. | 
| ```void```  | ```get_command()``` <br />  _Note: Declared in the .hpp file but never implemented - needs to be removed._ | 
| ```void```  | ```initalize()``` <br />  Generates a list of valves and a pseudo-valve Arduino, then logs an initalization message.   | 
| ```void```  | ```read()```  <br />  Calls the ```read()``` method of the pseudo-valve Arduino, converts the data from bytes into state and actuation information, and updates the Registry. | 
| ```void```  | ```actuate()``` <br />   Calls ```actuate_solenoids()```.  | 
| ```void```  | ```actuate_solenoids()``` <br />   For each solenoid, if the actuation priority is greater than the current priority, directs the Arduino to actuate the solenoid. Otherwise, denies the actuation request. Updates Registry and Flag information accordingly.  | 



## [TelemetryTask.hpp](https://github.com/ProjectCaelus/cpp-flight-software/blob/e48a34618497decfc76fcca128f6dc082e0124db/include/flight/modules/tasks/TelemetryTask.hpp) and [TelemetryTask.cpp](https://github.com/ProjectCaelus/cpp-flight-software/blob/master/src/modules/tasks/TelemetryTask.cpp)

The Telemetry Task handles the process that flow into and out of the FS. Three priority queues govern telemetry actions:
the ```ingest_queue```, containing all packets from GS that need to be processed; the ```enqueue_queue```, containing all packets FS wants to 
send to GS; and the ```send_queue```, containing all packets that will be sent during the ongoing Actuate phase of the RCA loop. 

| ```TelemetryTask()```| 
| :----------- | 
| Defaults to the constructor of the Task superclass. |

| Returns     | Description | 
| :---------- | :----------- | 
| ```void```  | ```initalize()``` <br />  Opens the telemetry connection to GS.  | 
| ```void```  | ```read()```  <br /> If the connection to GS is open, this method pushes all recieved packets to the inngest queue. | 
| ```void```  | ```enqueue()``` <br />   A helper method that pushes each packet that has been enqueued into the send queue.  | 
| ```void```  | ```actuate()```  <br />  If a Flag indicates that a reset is required, calls the telemetry reset method. Otherwise, calls ```enqueue()``` and sends all packets in the send queue to GS. | 